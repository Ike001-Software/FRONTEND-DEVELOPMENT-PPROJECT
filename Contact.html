<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Bubble Background by Section</title>
  <link rel="stylesheet" href="PracticeStyle.css">
</head>
<body>

  <!-- ✅ Bubble container (behind everything) -->
  <div class="bubble-container"></div>

  <!-- ✅ Section 1: Hero -->
  <section class="section section-1" data-color="purple">
    <h1>Section 1: Hero – Deep Indigo ✅</h1>
  </section>

  <!-- ✅ Section 2: About -->
  <section class="section section-2" data-color="pink">
    <h1>Section 2: About – Dark Purple ✅</h1>
  </section>

  <!-- ✅ Section 3: Services -->
  <section class="section section-3" data-color="aqua">
    <h1>Section 3: Services – Midnight Blue ✅</h1>
  </section>

  <!-- ✅ Bubble generation script with dynamic color logic -->
  <script>
    const container = document.querySelector('.bubble-container');
    const sections = document.querySelectorAll('.section');

    function getSectionColor(yPosition) {
      for (const section of sections) {
        const rect = section.getBoundingClientRect();
        const top = rect.top + window.scrollY;
        const bottom = rect.bottom + window.scrollY;

        if (yPosition >= top && yPosition < bottom) {
          return section.dataset.color;
        }
      }
      return null;
    }

    function createBubble() {
      const bubble = document.createElement('div');
      const size = Math.random() * 30 + 10;
      const duration = Math.random() * 3 + 3;
      const left = Math.random() * 100;
      const delay = Math.random() * 2;

      bubble.classList.add('bubble');
      bubble.style.width = `${size}px`;
      bubble.style.height = `${size}px`;
      bubble.style.left = `${left}vw`;
      bubble.style.animationDuration = `${duration}s`;
      bubble.style.animationDelay = `${delay}s`;

      container.appendChild(bubble);

      const startTime = Date.now();
      const animationTime = (duration + delay) * 1000;

      function updateBubbleColor() {
        const elapsed = Date.now() - startTime;
        const progress = elapsed / animationTime;
        const y = progress * window.innerHeight;

        const color = getSectionColor(y + window.scrollY);
        if (color) {
          if (color === 'purple') {
            bubble.style.background = 'radial-gradient(circle at 30% 30%, #fff, #9f7aea, #7c3aed)';
          } else if (color === 'pink') {
            bubble.style.background = 'radial-gradient(circle at 30% 30%, #fff, #f472b6, #db2777)';
          } else if (color === 'aqua') {
            bubble.style.background = 'radial-gradient(circle at 30% 30%, #fff, #38bdf8, #06b6d4)';
          }
        }

        if (elapsed < animationTime) {
          requestAnimationFrame(updateBubbleColor);
        }
      }

      requestAnimationFrame(updateBubbleColor);

      setTimeout(() => {
        bubble.remove();
      }, animationTime);
    }

    setInterval(createBubble, 100);
  </script>
</body>
</html>